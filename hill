#include <iostream>
#include <string>
#include <iomanip> // Cho setw
#include <cctype>   // Cho isalpha va toupper

using namespace std;

// Ham tinh nghich dao modulo cua mot so (neu ton tai)
int timNghichDaoModulo(int a, int m) {
    a = a % m;
    for (int x = 1; x < m; x++) {
        if ((a * x) % m == 1) {
            return x;
        }
    }
    return -1; // Khong tim thay nghich dao
}

// Ham tinh dinh thuc cua ma tran 2x2
int tinhDinhThuc2x2(int maTran[2][2]) {
    return (maTran[0][0] * maTran[1][1] - maTran[0][1] * maTran[1][0]);
}

// Ham tinh nghich dao modulo cua ma tran 2x2 (neu ton tai)
bool timNghichDaoMaTran2x2(int maTran[2][2], int modulo, int maTranNghichDao[2][2]) {
    int dinhThuc = tinhDinhThuc2x2(maTran);
    dinhThuc = dinhThuc % modulo;
    if (dinhThuc < 0) {
        dinhThuc += modulo;
    }

    int nghichDaoDinhThuc = timNghichDaoModulo(dinhThuc, modulo);
    if (nghichDaoDinhThuc == -1) {
        cerr << "Loi: Dinh thuc khong kha nghich modulo " << modulo << "." << endl;
        return false;
    }

    maTranNghichDao[0][0] = (maTran[1][1] * nghichDaoDinhThuc) % modulo;
    maTranNghichDao[0][1] = ((-maTran[0][1]) * nghichDaoDinhThuc % modulo + modulo) % modulo;
    maTranNghichDao[1][0] = ((-maTran[1][0]) * nghichDaoDinhThuc % modulo + modulo) % modulo;
    maTranNghichDao[1][1] =
